<body style="margin:0;padding:0;background-color: #666666;">
    <canvas id="canvas" width="640" height="400"></canvas>
</body>
<script>
    const BLACK = "#000000";
    const ACID_GREEN = "#00ff00";
    const text = "0123456789";

    const ctx = canvas.getContext("2d");
    ctx.font = "12px Arial";

    const m = ctx.measureText(text);
    const height = 2 + Math.ceil(m.actualBoundingBoxAscent + m.actualBoundingBoxDescent);
    const width = Math.ceil(m.actualBoundingBoxRight);
    const MARGIN = 11;
    ctx.fillStyle = BLACK;
    ctx.strokekStyle = BLACK;
    ctx.fillRect(MARGIN, MARGIN, width, height);

    ctx.fillStyle = ACID_GREEN;
    ctx.strokekStyle = ACID_GREEN;
    ctx.fillText(text, MARGIN, height + MARGIN - 1)

    var image = ctx.getImageData(MARGIN, MARGIN, width, height);
 console.log(image);

 SCALE = 4;
 GAP = 2;

 OUTPUT_OFFSET = 64
         //draw
ctx.clearRect(0, 0, width, height);

for (let y = 0; y < height; y++) {
    for (let x = 0; x < width; x++) {
        let i = (((y * width) + x) * 4) + 1;
        console.log(i)
        value = image.data[i] 
        console.log(value)
        if (value > 130) {
            ctx.fillRect(OUTPUT_OFFSET + x * SCALE, OUTPUT_OFFSET + y * SCALE, SCALE - GAP, SCALE - (GAP));
        }
    }
}
ctx.stroke(); 
//ctx.stroke();
// document.body.innerHTML += JSON.stringify(m);
// TextMetrics { 
//     width: 46.766666412353516, 
//     actualBoundingBoxLeft: 0.326171875, 
//     actualBoundingBoxRight: 47.82395833333333, 
//     actualBoundingBoxAscent: 8.8828125, 
//     actualBoundingBoxDescent: 0.158203125 
// }
</script>
